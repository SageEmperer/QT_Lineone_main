{% extends 'base/base.html' %}

{% block breadCrum %}
<div class="hk-pg-header mb-0 d-flex justify-content-between align-items-center">
    <h4 class="hk-pg-title m-3">Upload Students Data</h4>
</div>

{% endblock %}
{% block content %}



<section class="hk-sec-wrapper">
  <div class="row">
  <div class="col-sm">
    <div class="hk-pg-header d-flex justify-content-between align-items-center">
        <h4 class="hk-pg-title m-3 font-18"><b>List of Students</b></h4>
    </div>
    <hr>    

    <div class="table-wrap">
        <div class="button_1 d-flex justify-content pb-2">
            <div class="pb-2">
                <button type="button" class="btn btn-info"><i class="glyphicon glyphicon-import"></i>Sample CSV</button>
                <button type="button" class="btn btn-secondary"><i class="fa fa-file-excel-o"></i>&nbsp;CSV<span></span></button>
                <button type="button" class="btn btn-secondary"><i class="fa fa-file-pdf"></i>&nbsp;PDF</button>
                <button type="button" class="btn btn-secondary"><i class="fa fa-print"></i>&nbsp;Print</button>

            </div>
            <div class="ml-auto">
              <div id="button_operations">
                  <button type="button" class="btn btn-info" data-toggle="modal" data-target="#Addstudent"><i class="glyphicon glyphicon-plus"></i> Add Student</button>
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Uploadbulk"><i class="glyphicon glyphicon-import"></i> Add Bulk Students</button>
                  
                </div>  
            </div> 

 
        </div>
      <table id="datable_1" class="table table-hover w-100 display pb-30 table-bordered">
      <thead class="bg-dark" >
        <tr>
          <th class="text-white"><label class="checkbox-container"> <input type="checkbox" id="selectAllCheckbox"> </label>All</th>
          <th class="text-white">S.No</th>
          <th class="text-white">Full Name</th>
          <th class="text-white">Email</th>
          <th class="text-white">Mobile Number</th>
          <th class="text-white">Specialization</th>
          <th class="text-white">organization</th> 
          <th class="text-white">Course Name</th>
          <th class="text-white">Start Date</th>
          <th class="text-white">End date</th>
          
          
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><label class="checkbox-container"> <input type="checkbox" class="selectCheckbox"> </label></td>
          <td>1</td>
          <td>Sumitra</td>
          <td>sumitra@gmail.com</td>
          <td>8328364119</td>
          <td>Developer</td>
          <td >Ramanasoft Internship</td>
          <td>full stack python</td>
          <td>07-07-2024</td>
          <td>10-10-2024</td>
          
          
        </tr>
        <tr>
            <td><label class="checkbox-container"> <input type="checkbox" class="selectCheckbox"> </label></td>
            <td>2</td>
            <td>sushma</td>
            <td>sushma@gmail.com</td>
            <td>9325673213</td>
            <td>Full Stack Developer</td>
            <td >Ramanasoft Internship</td>
            <td>full stack python</td>
            <td>28-02-2024</td>
            <td>10-04-2024</td>
            
            
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
</section>


<!-- sented mails Table -->

<section class="hk-sec-wrapper">
  <div class="row">
  <div class="col-sm">
    <div class="hk-pg-header d-flex justify-content-between align-items-center">
        <h4 class="hk-pg-title m-3 font-18"><b>Sent Mails</b></h4>
    </div>
    <hr>  

    <div class="table-wrap">
      <div class="button_1 d-flex justify-content pb-2">
       
        <div class="ml-auto mr-2">
          <div id="button_operations">
              <button type="button" class="btn btn-danger"  id="deleteButton" style="display: none;"><i class="glyphicon glyphicon-trash"></i> Delete</button>

              <button type="button" class="btn btn-info" id="printButton"><i class="fa fa-print"></i> Print</button>
            </div>  
        </div> 


    </div>
      <table id="example_4" class="table table-hover w-100 display pb-30 table-bordered">
        <thead class="bg-dark" >
          <tr>
            <th class="text-white"><label class="checkbox-container"> <input type="checkbox" id="selectAll"> </label>All</th>
         
            <th class="text-white">S.No</th>
            <th class="text-white">Full Name</th>
            <th class="text-white">Email</th>
            <th class="text-white">Mobile Number</th>
            <th class="text-white">Specialization</th>
            <th class="text-white">organization</th> 
            <th class="text-white">Course Name</th>
            <th class="text-white">Start Date</th>
            <th class="text-white">End date</th>
            
            <th class="text-white">Certificate issued On</th>
            <th class="text-white">Action</th>
            
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><label class="checkbox-container"> <input type="checkbox" class="single-checkbox"> </label></td>
           
            <td>1</td>
            <td>Sumitra</td>
            <td>sumitra@gmail.com</td>
            <td>8328364119</td>
            <td>Developer</td>
            <td >Ramanasoft Internship</td>
            <td>full stack python</td>
            <td>07-07-2024</td>
            <td>10-10-2024</td>
            
            <td>3-6-2024</td>
            <td>
              <button type="button" class="btn btn-success" id="downloadButton"><i class="fa fa-download"></i></button>
            
            </td>
          </tr>
          <tr>
            <td><label class="checkbox-container"> <input type="checkbox" class="single-checkbox"> </label></td>
           
              <td>2</td>
              <td>sushma</td>
              <td>sushma@gmail.com</td>
              <td>9325673213</td>
              <td>Full Stack Developer</td>
              <td >Ramanasoft Internship</td>
              <td>full stack python</td>
              <td>28-02-2024</td>
              <td>10-04-2024</td>
              
              <td>3-6-2024</td>
              <td>
                <button type="button" class="btn btn-success" id="downloadButton"><i class="fa fa-download"></i></button>
            
              </td>
          </tr>
        </tbody>
      </table>
    </div>
    </div>
    </div>
    </section>

<!-- sent mails end here -->


<!--Add student modal start here-->

<div class="modal fade"  
    id="Addstudent" 
    tabindex="-1"
    role="dialog" 
    aria-labelledby="Addstudent" 
    aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h5 class="modal-title text-white" >Add student</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true" class="text-white">&times;</span>
      </div>


      <form action="" method="post" id="AddStudentForm">
        {% csrf_token %}
       <div class="modal-body">
          <div class="row">
            <div class="col-xl-12">
                    <div class="row ">
                        <div class="col-sm">

                            <div class="row">
                                <div class="col-md-6 mb-3 form-group">
                                    <label for="">Full Name</label><span class="text-danger">*</span>
                                    <input type="text" class="form-control"  required>
                                </div>
                                <div class="col-md-6 form-group">
                                  <label for="">Email</label><span class="text-danger">*</span><br>
                                  <input type="email" class="form-control" required>
                                </div>
                              
                            </div>
        
                            <div class="row">
                                <div class="col-sm">
                                  <div class="row">
                                    <div class="col-md-6 mb-3 form-group">
                                      <label for="" >Mobile Number</label><span class="text-danger">*</span>
                                      <input type="text" class="form-control"   required>
                                    </div>
                                    <div class="col-md-6 form-group">
                                      <label for="" >Specialization</label><span class="text-danger">*</span>
                                      <input type="text" class="form-control"   required>
                                    </div>
                                  
                                  </div>
                                </div>
                              </div>
        
                            <div class="row">
                              <div class="col-sm">
                                <div class="row">
                                  <div class="col-md-6 mb-3 form-group" >
                                    <label for="">organization</label><span class="text-danger">*</span>
                                    <input type="text" class="form-control"   required>
                                  </div>
                                  <div class="col-md-6 form-group">
                                    <label for="" >Cource Name</label><span class="text-danger">*</span>
                                    <input type="text" class="form-control"  required>
                                  </div>
                                  
                                </div>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col-sm">
                                <div class="row">
                                  <div class="col-md-6 mb-3 form-group" >
                                    <label for="">Start Date</label><span class="text-danger">*</span>
                                    <input type="date" class="form-control" placeholder="Ex:7873344512"  required>
                                  </div>
                                  <div class="col-md-6 form-group">
                                    <label for="" >End Date</label><span class="text-danger">*</span>
                                    <input type="date" class="form-control" placeholder="Ex:B tech,Mca" required>
                                  </div>
                                  
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-sm">
                                <div class="row">
                                  <div class="col-md-12 mb-3 form-group" >
                                    <label for="">Certifictate Id</label><span class="text-danger">*</span>
                                    <input type="text" class="form-control"   required>
                                  </div>
                                
                                  
                                </div>
                              </div>
                            </div>
        
                   </div>
                        </div>
                    </div>
                  </div>
                </div>

              <div class="modal-footer d-flex justify-content-center">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
              </div>
              </div>
            </div>
          </div>
      </form> 
<!--Add student modal end here-->


<!-- Upload model  -->

<div class="modal fade" id="Uploadbulk" tabindex="-1" role="dialog" aria-labelledby="Uploadhr" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h5 class="modal-title text-white">Upload File</h5>
        <button type="button"  class="close"  data-dismiss="modal"  aria-label="Close">
          <span aria-hidden="true" class="text-whte">&times;</span>
        </button>
      </div>
      <form>
      <div class="modal-body">
          <input type="file" id="input-file-now" class="dropify" />
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button type="submit" class="btn btn-primary">Submit</button>
        <button class="btn btn-secondary" data-dismiss="modal" aria-label="Close">
          Close
        </button>
      </form>
      </div>
    </div>
  </div>
</div>

<!-- Upload model end here -->


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script>


// datatable of list of students
  $(document).ready(function() {
    $('#example').DataTable();
  });


  
  $(document).ready(function () {
    // Initialize DataTables for each table
    $('#example_4').DataTable({
      "paging": true,
      "searching": true,
      "responsive": true,
      "lengthChange": true,
      "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
      // Customize search box appearance
      "dom": '<"row"<"col-sm-6"l><"col-sm-6"f>>tip',
      // Customize search field placeholder and remove search label
      "language": {
        "search": "",
        "searchPlaceholder": "Search..."
      }
    });
  });


  // check boxes for list of students

  $(document).ready(function () {
        
        $('#selectAllCheckbox').change(function () {  
            $('.selectCheckbox').prop('checked', $(this).prop('checked'));
        });
        $('.selectCheckbox').change(function () {
            if (!$(this).prop('checked')) {
                $('#selectAllCheckbox').prop('checked', false);
            }
        });
    });



   



// list of students buttons
  $(document).ready(function () {
    function updateButtonOperations() {
      var selectedCount = $('.selectCheckbox:checked').length;
      var buttonsHtml = '';

      if (selectedCount > 1) {
        // When more than one checkbox is selected
        buttonsHtml = `
          <div class="px-3">
            <button class="btn btn-danger"><i class="glyphicon glyphicon-trash"></i>&nbsp Delete</button>
            <button class="btn btn-primary"><i class="glyphicon glyphicon-envelope"></i>&nbsp Send Email</button>
          </div>`;
      } else if (selectedCount === 1) {
        // When exactly one checkbox is selected
        buttonsHtml = `
          <div class="px-3">
            <button class="btn btn-info"><i class="glyphicon glyphicon-pencil"></i>&nbsp Edit</button>
            <button class="btn btn-danger"><i class="glyphicon glyphicon-trash"></i>&nbsp Delete</button>
            <button class="btn btn-primary"><i class="glyphicon glyphicon-envelope"></i>&nbsp Send Email</button>
          </div>`;
      } else {
        // When no checkbox is selected
        buttonsHtml = `
          <div class="px-3">
            <button type="button" class="btn btn-info" data-toggle="modal" data-target="#Addstudent"><i class="glyphicon glyphicon-plus"></i> Add Student</button>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Uploadbulk"><i class="glyphicon glyphicon-import"></i> Add Bulk Students</button>
            
          </div>`;
      }

      $('#button_operations').html(buttonsHtml);
      if (selectedCount === 0) {
        $('#button_operations').show();
      } else {
        $('#button_operations').show(); // Ensure that the buttons are always visible when checkboxes are selected
      }
    }



// sent table check boxes
    // Attach change event listener to checkboxes for row selection
    $(document).on('change', '.selectCheckbox', function () {
      // Check if all checkboxes are selected
      var allChecked = $('.selectCheckbox').length === $('.selectCheckbox:checked').length;
      $('#selectAllCheckbox').prop('checked', allChecked);
      updateButtonOperations();
    });

    // "Check All" functionality
    $('#selectAllCheckbox').change(function () {
      $('.selectCheckbox').prop('checked', this.checked);
      updateButtonOperations();
    });

    // Initial update of buttons visibility
    updateButtonOperations();
  });


  document.addEventListener("DOMContentLoaded", function() {
    const selectAllCheckbox = document.getElementById('selectAll');
    const singleCheckboxes = document.querySelectorAll('.single-checkbox');

    selectAllCheckbox.addEventListener('change', function() {
      singleCheckboxes.forEach(checkbox => {
        checkbox.checked = selectAllCheckbox.checked;
      });
    });
  });


// sent mails table button code
  document.addEventListener("DOMContentLoaded", function() {
  const selectAllCheckbox = document.getElementById('selectAll');
  const singleCheckboxes = document.querySelectorAll('.single-checkbox');
  const deleteButton = document.getElementById('deleteButton');
  const printButton = document.getElementById('printButton');

  // Function to check if any checkbox is selected
  function anyCheckboxSelected() {
    return Array.from(singleCheckboxes).some(checkbox => checkbox.checked);
  }

  // Function to toggle button visibility based on checkbox selection
  function toggleButtonVisibility() {
    if (anyCheckboxSelected()) {
      deleteButton.style.display = 'inline-block';
      printButton.style.display = 'none';
    } else {
      deleteButton.style.display = 'none';
      printButton.style.display = 'inline-block';
    }
  }

  // Event listener for "All" checkbox
  selectAllCheckbox.addEventListener('change', function() {
    singleCheckboxes.forEach(checkbox => {
      checkbox.checked = selectAllCheckbox.checked;
    });
    toggleButtonVisibility(); // Toggle button visibility when "All" checkbox is clicked
  });

  // Event listener for individual checkboxes
  singleCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', function() {
      toggleButtonVisibility(); // Toggle button visibility when any checkbox is clicked
    });
  });
});

$(document).ready(function () {
  $.validator.addMethod("noSpecialChar", function (value, element) {
    return this.optional(element) || /^[a-zA-Z\s]+$/.test(value);
  }, "Special Characters are not allowed and Numbers are not allowed");

  $('#AddStudentForm').validate({
    rules: {
      full_name: {
        required: true,
        noSpecialChar: true
      },
      email: {
        required: true,
        email: true
      },
      mobile_number: {
        required: true,
        number: true
      },
      specialization: {
        required: true,
        noSpecialChar: true
      },
      organization: {
        required: true,
        noSpecialChar: true
      },
      course_name: {
        required: true
      },
      start_date: {
        required: true
      },
      end_date: {
        required: true
      },
      certificate_id: {
        required: true
      }
    },
    messages: {
      full_name: {
        required: "Please enter full name"
      },
      email: {
        required: "Please enter email address",
        email: "Please enter a valid email address"
      },
      mobile_number: {
        required: "Please enter mobile number",
        number: "Please enter a valid mobile number"
      },
      specialization: {
        required: "Please enter specialization"
      },
      organization: {
        required: "Please enter organization"
      },
      course_name: {
        required: "Please enter course name"
      },
      start_date: {
        required: "Please select start date"
      },
      end_date: {
        required: "Please select end date"
      },
      certificate_id: {
        required: "Please enter certificate ID"
      }
    },
    submitHandler: function (form) {
      form.submit();
    }
  });
});

</script>

{% endblock %}